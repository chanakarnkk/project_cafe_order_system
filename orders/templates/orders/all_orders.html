{% extends 'orders/base.html' %}

{% block title %}All Orders - Food Ordering System{% endblock %}

{% block content %}
<style>
    body {
        background: linear-gradient(135deg, #ffd1dc 0%, #ffb6c1 25%, #ffc8dd 50%, #ffd1dc 75%, #ffb6c1 100%);
        background-size: 400% 400%;
        animation: gradient-shift 15s ease infinite;
    }
    
    @keyframes gradient-shift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }
    
    .page-header {
        text-align: center;
        margin-bottom: 40px;
        background: rgba(255, 255, 255, 0.95);
        padding: 40px 20px;
        border-radius: 30px;
        box-shadow: 0 20px 60px rgba(255, 182, 193, 0.4);
        border: 3px solid #ffb6c1;
        position: relative;
        overflow: hidden;
    }
    
    .page-header::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, transparent, rgba(255, 182, 193, 0.2), transparent);
        animation: shimmer 3s infinite;
    }
    
    @keyframes shimmer {
        0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
        100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }
    
    .page-header h2 {
        color: #ff1493;
        font-size: 2.5em;
        margin-bottom: 20px;
        position: relative;
        z-index: 1;
        background: linear-gradient(135deg, #ff69b4 0%, #ff1493 50%, #ff69b4 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .stats-bar {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
        position: relative;
        z-index: 1;
    }
    
    .stat-box {
        background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
        padding: 25px;
        border-radius: 20px;
        text-align: center;
        box-shadow: 0 8px 20px rgba(255, 105, 180, 0.4);
        border: 3px solid rgba(255, 255, 255, 0.5);
        transition: all 0.3s;
        color: white;
    }
    
    .stat-box:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 25px rgba(255, 105, 180, 0.5);
    }
    
    .stat-number {
        font-size: 2.5em;
        font-weight: bold;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        margin-bottom: 10px;
    }
    
    .stat-label {
        font-size: 1.1em;
        opacity: 0.95;
    }
    
    .filter-section {
        background: rgba(255, 255, 255, 0.95);
        padding: 25px;
        border-radius: 20px;
        box-shadow: 0 8px 20px rgba(255, 182, 193, 0.3);
        margin-bottom: 30px;
        display: flex;
        gap: 15px;
        align-items: center;
        flex-wrap: wrap;
        border: 3px solid #ffb6c1;
    }
    
    .filter-section strong {
        color: #ff1493;
        font-size: 1.2em;
    }
    
    .filter-btn {
        padding: 12px 25px;
        border: 3px solid #ff69b4;
        background: white;
        color: #ff69b4;
        border-radius: 25px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        transition: all 0.3s;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }
    
    .filter-btn:hover {
        background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
        color: white;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(255, 105, 180, 0.4);
    }
    
    .filter-btn.active {
        background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
        color: white;
        box-shadow: 0 5px 15px rgba(255, 105, 180, 0.4);
    }
    
    .orders-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 30px;
    }
    
    .order-card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 25px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(255, 182, 193, 0.3);
        transition: all 0.4s;
        border: 3px solid #ffb6c1;
        position: relative;
        overflow: hidden;
    }
    
    .order-card::before {
        content: '‚ú®';
        position: absolute;
        top: 15px;
        right: 15px;
        font-size: 2em;
        opacity: 0.3;
    }
    
    .order-card:hover {
        transform: translateY(-10px) rotate(1deg);
        box-shadow: 0 15px 40px rgba(255, 105, 180, 0.4);
        border-color: #ff69b4;
    }
    
    .order-card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 3px solid #ffc8dd;
    }
    
    .order-number {
        font-size: 1.6em;
        font-weight: bold;
        background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .order-table {
        background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
        color: white;
        padding: 10px 20px;
        border-radius: 20px;
        font-weight: bold;
        box-shadow: 0 4px 10px rgba(255, 105, 180, 0.3);
    }
    
    .order-info-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 12px;
        padding: 10px 0;
    }
    
    .info-label {
        color: #ff69b4;
        font-weight: 600;
    }
    
    .info-value {
        font-weight: bold;
        color: #333;
    }
    
    .status-badge {
        display: inline-block;
        padding: 10px 20px;
        border-radius: 25px;
        font-weight: bold;
        font-size: 1em;
        box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    
    .status-pending { 
        background: linear-gradient(135deg, #fff9c4 0%, #fff176 100%); 
        color: #f57f17;
        border: 2px solid #fbc02d;
    }
    .status-preparing { 
        background: linear-gradient(135deg, #b3e5fc 0%, #4fc3f7 100%); 
        color: #01579b;
        border: 2px solid #0288d1;
    }
    .status-ready { 
        background: linear-gradient(135deg, #c8e6c9 0%, #81c784 100%); 
        color: #1b5e20;
        border: 2px solid #388e3c;
    }
    .status-completed { 
        background: linear-gradient(135deg, #e0e0e0 0%, #bdbdbd 100%); 
        color: #424242;
        border: 2px solid #757575;
    }
    .status-cancelled { 
        background: linear-gradient(135deg, #ffcdd2 0%, #ef5350 100%); 
        color: #b71c1c;
        border: 2px solid #d32f2f;
    }
    
    .order-total {
        font-size: 2em;
        font-weight: bold;
        background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-align: right;
        margin: 20px 0;
    }
    
    .order-time {
        color: #999;
        font-size: 0.95em;
    }
    
    .view-btn {
        width: 100%;
        margin-top: 20px;
        background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
        padding: 15px;
        border-radius: 15px;
        font-size: 1.1em;
        font-weight: bold;
        transition: all 0.3s;
    }
    
    .view-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 10px 25px rgba(255, 105, 180, 0.4);
    }
    
    .empty-state {
        text-align: center;
        padding: 80px 20px;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 30px;
        box-shadow: 0 10px 30px rgba(255, 182, 193, 0.3);
        border: 3px solid #ffb6c1;
    }
    
    .empty-state-icon {
        font-size: 6em;
        margin-bottom: 20px;
        animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-20px); }
    }
    
    .empty-state-text {
        font-size: 1.5em;
        margin-bottom: 30px;
        color: #ff69b4;
        font-weight: 600;
    }
    
    .decorative-elements {
        position: fixed;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: 0;
        overflow: hidden;
    }
    
    .floating-emoji {
        position: absolute;
        font-size: 3em;
        opacity: 0.2;
        animation: float-random 20s ease-in-out infinite;
    }
    
    @keyframes float-random {
        0%, 100% { transform: translate(0, 0) rotate(0deg); }
        25% { transform: translate(50px, -50px) rotate(90deg); }
        50% { transform: translate(0, -100px) rotate(180deg); }
        75% { transform: translate(-50px, -50px) rotate(270deg); }
    }
    
    .emoji-1 { top: 10%; left: 10%; animation-delay: 0s; }
    .emoji-2 { top: 15%; right: 15%; animation-delay: 2s; }
    .emoji-3 { bottom: 15%; left: 20%; animation-delay: 4s; }
    .emoji-4 { bottom: 20%; right: 10%; animation-delay: 6s; }
    
    .heart-decoration {
        position: absolute;
        color: #ffb6c1;
        font-size: 2em;
        opacity: 0.15;
        animation: heartbeat 2s ease-in-out infinite;
    }
    
    @keyframes heartbeat {
        0%, 100% { transform: scale(1); opacity: 0.15; }
        50% { transform: scale(1.2); opacity: 0.3; }
    }
    
    .heart-1 { top: 5%; left: 15%; }
    .heart-2 { top: 10%; right: 20%; animation-delay: 0.5s; }
    .heart-3 { bottom: 10%; left: 25%; animation-delay: 1s; }
    
    .content-wrapper {
        position: relative;
        z-index: 1;
    }
</style>

<div class="decorative-elements">
    <div class="floating-emoji emoji-1">üßÅ</div>
    <div class="floating-emoji emoji-2">üç∞</div>
    <div class="floating-emoji emoji-3">üçì</div>
    <div class="floating-emoji emoji-4">‚òï</div>
    
    <div class="heart-decoration heart-1">üíï</div>
    <div class="heart-decoration heart-2">üíó</div>
    <div class="heart-decoration heart-3">üíñ</div>
</div>

<div class="content-wrapper">
    <div class="page-header">
        <h2>üìã ‚ú® All Orders  ‚ú®</h2>
        
        <div class="stats-bar">
            <div class="stat-box">
                <div class="stat-number">{{ orders.count }}</div>
                <div class="stat-label">All Orders </div>
            </div>
            <div class="stat-box">
                <div class="stat-number">{{ orders|length }}</div>
                <div class="stat-label">Showing</div>
            </div>
        </div>
    </div>

    <div class="filter-section">
        <strong>üå∏ Filter by status:</strong>
        <a href="{% url 'all_orders' %}" class="filter-btn {% if not current_filter %}active{% endif %}">
            üìä all
        </a>
        {% for status_code, status_name in status_choices %}
        <a href="{% url 'all_orders' %}?status={{ status_code }}" 
           class="filter-btn {% if current_filter == status_code %}active{% endif %}">
            {% if status_code == 'pending' %}‚è≥
            {% elif status_code == 'preparing' %}üë®‚Äçüç≥
            {% elif status_code == 'ready' %}‚úÖ
            {% elif status_code == 'completed' %}‚úîÔ∏è
            {% else %}‚ùå{% endif %}
            {{ status_name }}
        </a>
        {% endfor %}
    </div>

    {% if orders %}
    <div class="orders-grid">
        {% for order in orders %}
        <div class="order-card">
            <div class="order-card-header">
                <span class="order-number">üå∏ Order #{{ order.id }}</span>
                <span class="order-table">{{ order.table }}</span>
            </div>
            
            <div class="order-info-row">
                <span class="info-label">status:</span>
                <span class="status-badge status-{{ order.status }}">
                    {% if order.status == 'pending' %}‚è≥ Pending
                    {% elif order.status == 'preparing' %}üë®‚Äçüç≥ Preparing
                    {% elif order.status == 'ready' %}‚úÖ Ready to serve
                    {% elif order.status == 'completed' %}‚úîÔ∏è Finished
                    {% else %}‚ùå cancel{% endif %}
                </span>
            </div>
            
            <div class="order-info-row">
                <span class="info-label">üçΩÔ∏èNumber of items:</span>
                <span class="info-value">{{ order.items.count }} list</span>
            </div>
            
            {% if order.customer_name %}
            <div class="order-info-row">
                <span class="info-label">üë§ Customer name:</span>
                <span class="info-value">{{ order.customer_name }}</span>
            </div>
            {% endif %}
            
            <div class="order-info-row">
                <span class="info-label">üïê Time:</span>
                <span class="order-time">{{ order.created_at|date:"d/m/Y H:i" }}</span>
            </div>
            
            <div class="order-total">
                ‡∏ø{{ order.total_amount }}
            </div>
            
            <a href="{% url 'view_order' order.id %}" class="btn btn-primary view-btn">
                üíñ View details ‚Üí
            </a>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-state-icon">üå∏</div>
        <div class="empty-state-text">
            {% if current_filter %}
                No orders found with this status.
            {% else %}
                There are no orders in the system yet.
            {% endif %}
        </div>
        <a href="{% url 'home' %}" class="btn btn-primary" style="padding: 15px 40px; font-size: 1.2em;">
            ‚ú® Start ordering food
        </a>
    </div>
    {% endif %}

    <div style="text-align: center; margin-top: 50px;">
        <a href="{% url 'home' %}" class="btn btn-secondary" style="padding: 15px 40px; font-size: 1.1em; background: linear-gradient(135deg, #ffc0cb 0%, #ffb6c1 100%); color: #ff1493; border: 3px solid #ff69b4;">
            üè† Return to home page
        </a>
    </div>
</div>

{% endblock %}